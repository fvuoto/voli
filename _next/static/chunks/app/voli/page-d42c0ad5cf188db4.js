(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[390],{7035:function(e,r,a){Promise.resolve().then(a.bind(a,5874))},5874:function(e,r,a){"use strict";a.r(r),a.d(r,{default:function(){return f}});var t=a(7437),n=a(2265),i=a(5374),s=a(2009),l=function(e){let{partenza:r,onPartenzaChange:a}=e,[l,o]=(0,n.useState)(null),[c,u]=(0,n.useState)(!0),[d,h]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("https://www.ryanair.com/api/views/locate/5/airports/en/active");if(!e.ok)throw Error("HTTP error: Status ".concat(e.status));let r=await e.json();r.sort((e,r)=>e.country.name<r.country.name?-1:e.country.name>r.country.name?1:e.name<r.name?-1:e.name>r.name?1:0),o(r),h(null)}catch(e){h(e.message),o(null)}finally{u(!1)}})()},[]),(0,t.jsxs)("div",{children:[c&&(0,t.jsx)("div",{children:"Loading..."}),d&&(0,t.jsxs)("div",{children:["Error: ",d]}),l&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.Z,{controlId:"partenzaFloatingInput",label:"Aeroporto di partenza",className:"mb-3",children:(0,t.jsxs)(s.Z.Select,{id:"sel_aeroporto",name:"aeroporti",value:r,onChange:e=>{a(e.target.value)},children:[(0,t.jsx)("option",{value:"",children:"Seleziona un aeroporto"}),l.map(e=>(0,t.jsxs)("option",{value:e.code,children:[e.country.name," / ",e.name,"  "]},e.code))]})})})]})},o=a(9811);function c(e){if(!e)return"";let r=new Date(e),a=r.getHours().toString().padStart(2,"0"),t=r.getMinutes().toString().padStart(2,"0");return"".concat(a,":").concat(t)}var u=function(e){let{fromCode:r,toCode:a,startDate:i,currency:s}=e,[l,u]=(0,n.useState)(null),[d,h]=(0,n.useState)(!1),[x,m]=(0,n.useState)(null),[v,j]=(0,n.useState)(!0);return(0,n.useEffect)(()=>{if(!r||!a){u(null);return}console.log("Volo da",r,"a",a),(async()=>{try{let e="https://www.ryanair.com/api/farfnd/v4/oneWayFares/".concat(r,"/").concat(a,"/cheapestPerDay?outboundMonthOfDate=").concat(i,"&currency=").concat(s),t=await fetch(e);if(!t.ok)throw Error("HTTP error: Status ".concat(t.status));let n=await t.json();u(n),m(null)}catch(e){m(e.message),u(null)}finally{h(!1),j(!1)}})()},[r,a,i,s]),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{children:[v&&(0,t.jsx)("div",{children:"..."}),d&&(0,t.jsx)("div",{children:"Loading..."}),x&&(0,t.jsxs)("div",{children:["Error: ",x]}),l&&(0,t.jsxs)(o.Z,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"intestazioni_volo",children:"Giorno"}),(0,t.jsx)("th",{className:"intestazioni_volo",children:"Orario"}),(0,t.jsx)("th",{className:"intestazioni_volo",children:"Prezzo"})]})}),(0,t.jsx)("tbody",{children:l.outbound.fares.map(e=>{let r=new Date(e.day),a=r.getDate()+"-"+(r.getMonth()+1)+"-"+r.getFullYear(),n="";e.departureDate&&e.arrivalDate&&(n=c(e.departureDate)+" â†’ "+c(e.arrivalDate));let i=!function(e){let r=e.getDay();return 0===r||6===r}(r)?"":"bg-warning-subtle";if(l.outbound.minFare){var s,o;l.outbound.minFare.price.value===(null===(s=e.price)||void 0===s?void 0:s.value)&&(i+=" min_fare "),l.outbound.maxFare.price.value===(null===(o=e.price)||void 0===o?void 0:o.value)&&(i+=" max_fare")}return(!0===e.soldOut||!0===e.unavailable)&&(i+=" non_disponibile"),(0,t.jsxs)("tr",{className:"righe_voli",children:[(0,t.jsx)("td",{className:i,children:a}),(0,t.jsx)("td",{className:i,children:n}),(0,t.jsx)("td",{className:i,children:e.price?"".concat(e.price.currencySymbol," ").concat(e.price.value):""})]},e.day)})})]})]})})},d=function(e){let{partenza:r,arrivo:a,onDestinazioneChange:l}=e,[o,c]=(0,n.useState)(null),[u,d]=(0,n.useState)(!0),[h,x]=(0,n.useState)(null);return(0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("https://www.ryanair.com/api/views/locate/searchWidget/routes/en/airport/".concat(r));if(!e.ok)throw Error("HTTP error: Status ".concat(e.status));let a=await e.json();a.sort((e,r)=>e.arrivalAirport.country.name<r.arrivalAirport.country.name?-1:e.arrivalAirport.country.name>r.arrivalAirport.country.name?1:e.arrivalAirport.name<r.arrivalAirport.name?-1:e.arrivalAirport.name>r.arrivalAirport.name?1:0),c(a),x(null)}catch(e){x(e.message),c(null)}finally{d(!1)}})()},[r]),(0,t.jsxs)("div",{children:[u&&(0,t.jsx)("div",{children:"Loading..."}),h&&(0,t.jsxs)("div",{children:["Error: ",h]}),o&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.Z,{label:"Aeroporto di arrivo",className:"mb-3",children:(0,t.jsxs)(s.Z.Select,{name:"destinazione",value:a,onChange:e=>{l(e.target.value)},children:[(0,t.jsx)("option",{value:"",children:"Seleziona un aeroporto"}),o.map(e=>(0,t.jsxs)("option",{value:e.arrivalAirport.code,children:[e.arrivalAirport.country.name," / ",e.arrivalAirport.name]},e.arrivalAirport.code))]})})})]})},h=e=>{let{selectedDate:r,onDateChange:a}=e,n=new Date().toISOString().split("T")[0];return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(i.Z,{label:"Data del volo",className:"mb-3",children:(0,t.jsx)(s.Z.Control,{id:"data_volo","aria-describedby":"Data del volo",type:"date",value:r,min:n,onChange:e=>a(e.target.value)})})})},x=a(2824),m=a(3137),v=a(358),j=a(6712),p=a(4746);function f(){let e=new Date().toISOString().split("T")[0],[r,a]=(0,n.useState)("BLQ"),[i,s]=(0,n.useState)(""),[o,c]=(0,n.useState)(e);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("h2",{className:"header",children:["Voli Ryanair pi\xf9 convenienti ",(0,t.jsx)("i",{className:"bi bi-airplane"})]}),(0,t.jsxs)(m.Z,{children:[(0,t.jsx)(m.Z.Title,{children:"Opzioni di ricerca"}),(0,t.jsxs)(x.default,{children:[(0,t.jsxs)(v.Z,{children:[(0,t.jsx)(j.Z,{xs:6,xl:10,children:(0,t.jsx)(h,{selectedDate:o,onDateChange:c})}),(0,t.jsx)(j.Z,{xs:3,xl:1,children:(0,t.jsxs)(p.Z,{size:"sm",variant:"success",onClick:()=>{let e=new Date(o);e.setMonth(e.getMonth()-1),c(e.toISOString().split("T")[0])},children:[(0,t.jsx)("i",{className:"bi bi-arrow-left"}),(0,t.jsx)("br",{}),"Mese p."]})}),(0,t.jsx)(j.Z,{xs:3,xl:1,children:(0,t.jsxs)(p.Z,{size:"sm",variant:"success",onClick:()=>{let e=new Date(o);e.setMonth(e.getMonth()+1),c(e.toISOString().split("T")[0])},children:[(0,t.jsx)("i",{className:"bi bi-arrow-right"}),(0,t.jsx)("br",{}),"Mese d."]})})]}),(0,t.jsxs)(v.Z,{children:[(0,t.jsx)(j.Z,{xs:5,children:(0,t.jsx)(l,{partenza:r,onPartenzaChange:e=>{a(e),s("")}})}),(0,t.jsx)(j.Z,{xs:5,children:(0,t.jsx)(d,{partenza:r,arrivo:i,onDestinazioneChange:e=>{s(e)}})}),(0,t.jsx)(j.Z,{xs:1,children:(0,t.jsxs)(p.Z,{variant:"primary",size:"sm",onClick:()=>{i&&(a(i),s(r))},children:[(0,t.jsx)("i",{className:"bi bi-arrow-left-right"}),(0,t.jsx)("br",{}),"Inverti"]})})]})]})]}),(0,t.jsx)(u,{fromCode:r,toCode:i,startDate:o,currency:"EUR"})]})}}},function(e){e.O(0,[369,971,23,744],function(){return e(e.s=7035)}),_N_E=e.O()}]);